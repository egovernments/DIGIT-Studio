{
  "tenantId": "pg",
  "moduleName": "CommonService",
  "ServiceConfiguration": [
    {
      "module": "Tradelicence",
      "service": "NewTL",
      "fields": [
        {
          "name": "tradeStructureType",
          "label": "Trade Structure Type ",
          "type": "string",
          "reference": "mdms",
          "required": true,
          "schema": "Tradelicence.TradeStructureType"
        },
        {
          "name": "tradeStructureSubType",
          "label": "Trade Structure Sub Type ",
          "type": "string",
          "reference": "mdms",
          "dependencies": [
            "tradeStructureType"
          ],
          "required": true,
          "schema": "Tradelicence.TradeStructureSubType"
        },
        {
          "name": "tradeLicenceType",
          "label": "Trade Licence Type ",
          "type": "string",
          "reference": "mdms",
          "required": true,
          "schema": "Tradelicence.TradeLicenceType"
        },
        {
          "name": "tradeCategory",
          "label": "Trade Category ",
          "type": "string",
          "reference": "mdms",
          "required": true,
          "schema": "Tradelicence.TradeCategory"
        },
        {
          "name": "tradeType",
          "label": "Trade Type ",
          "type": "string",
          "reference": "mdms",
          "required": true,
          "schema": "Tradelicence.TradeType"
        },
        {
          "name": "tradeSubType",
          "label": "Trade Sub Type ",
          "type": "string",
          "reference": "mdms",
          "dependencies": [
            "tradeType"
          ],
          "required": true,
          "schema": "Tradelicence.TradeSubType"
        },
        {
          "name": "tradeMovable",
          "label": "tradeMovable",
          "type": "string",
          "reference": "enum",
          "dependencies": [
            "tradeType"
          ],
          "required": true,
          "values": [
            "YES",
            "NO"
          ]
        },
        {
          "name": "tradeName",
          "label": "Trade Name ",
          "type": "string",
          "maxLength": 128,
          "minLength": 2,
          "validation": {
            "regex": "^[A-Za-z0-9 ]+$",
            "message": "Only letters and numbers allowed"
          },
          "required": true,
          "orderNumber": 1
        },
        {
          "name": "tradeUnits",
          "label": "Trade Units ",
          "type": "array",
          "items": {
            "type": "object",
            "properties": [
              {
                "name": "type",
                "label": "Trade type ",
                "type": "string"
              },
              {
                "name": "count",
                "label": "Trade count ",
                "type": "number"
              }
            ]
          }
        },
        {
          "name": "accessories",
          "label": "Trade accessories ",
          "type": "array",
          "items": {
            "type": "object",
            "properties": [
              {
                "name": "type",
                "label": "accessories type ",
                "type": "string"
              },
              {
                "name": "count",
                "label": "accessories count ",
                "type": "number"
              }
            ]
          }
        }
      ],
      "workflow": {
        "businessService": "Tradelicence.NewTL",
        "business": "public-services",
        "businessServiceSla": 5184000000,
        "states": [
          {
            "sla": null,
            "state": null,
            "applicationStatus": null,
            "docUploadRequired": false,
            "isStartState": true,
            "isTerminateState": false,
            "isStateUpdatable": true,
            "actions": [
              {
                "action": "CREATE",
                "nextState": "PENDING_FOR_VERIFICATION",
                "roles": [
                  "CITIZEN",
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              }
            ]
          },
          {
            "sla": 172800000,
            "state": "PENDING_FOR_VERIFICATION",
            "applicationStatus": "INWORKFLOW",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": true,
            "actions": [
              {
                "action": "VERIFY_AND_FORWARD",
                "nextState": "PENDING_FOR_PAYMENT",
                "roles": [
                  "CITIZEN",
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              },
              {
                "action": "SEND_BACK",
                "nextState": "PENDING_FOR_CORRECTION",
                "roles": [
                  "CITIZEN",
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              }
            ]
          },
          {
            "sla": 604800000,
            "state": "PENDING_FOR_PAYMENT",
            "applicationStatus": "INWORKFLOW",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": true,
            "actions": [
              {
                "action": "PAY",
                "nextState": "PENDING_FOR_APPROVAL",
                "roles": [
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              }
            ]
          },
          {
            "sla": 86400000,
            "state": "PENDING_FOR_APPROVAL",
            "applicationStatus": "INWORKFLOW",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": false,
            "isStateUpdatable": true,
            "actions": [
              {
                "action": "APPROVE",
                "nextState": "APPROVED",
                "roles": [
                  "CITIZEN",
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              },
              {
                "action": "SEND_BACK",
                "nextState": "PENDING_FOR_VERIFICATION",
                "roles": [
                  "CITIZEN",
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              },
              {
                "action": "REJECT",
                "nextState": "REJECTED",
                "roles": [
                  "CITIZEN",
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              },
              {
                "action": "SEND_BACK_TO_ORIGINATOR",
                "nextState": "PENDING_FOR_CORRECTION",
                "roles": [
                  "CITIZEN",
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              }
            ]
          },
          {
            "sla": 86400000,
            "state": "PENDING_FOR_CORRECTION",
            "applicationStatus": "INWORKFLOW",
            "docUploadRequired": false,
            "isStartState": true,
            "isTerminateState": false,
            "isStateUpdatable": true,
            "actions": [
              {
                "action": "EDIT",
                "nextState": "PENDING_FOR_VERIFICATION",
                "roles": [
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              },
              {
                "action": "REJECT",
                "nextState": "REJECTED",
                "roles": [
                  "ARCHITECT",
                  "STUDIO_ADMIN"
                ]
              }
            ]
          },
          {
            "sla": null,
            "state": "APPROVED",
            "applicationStatus": "ACTIVE",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": true,
            "isStateUpdatable": false,
            "actions": []
          },
          {
            "sla": null,
            "state": "REJECTED",
            "applicationStatus": "INACTIVE",
            "docUploadRequired": false,
            "isStartState": false,
            "isTerminateState": true,
            "isStateUpdatable": false,
            "actions": []
          }
        ],
        "ACTIVE": [
          "APPROVED"
        ],
        "INACTIVE": [
          "REJECTED",
          "WITHDRAWN"
        ]
      },
      "documents": [
        {
          "states": [
            "applied",
            "approved"
          ],
          "category": "address-proof",
          "documentTypes": [
            "aadhar",
            "voter"
          ],
          "active": true,
          "isMandatory": false,
          "allowedFileTypes": [
            "pdf",
            "doc",
            "docx",
            "xlsx",
            "xls",
            "jpeg",
            "jpg",
            "png"
          ],
          "maxSizeInMB": 5,
          "maxFilesAllowed": 1
        },
        {
          "category": "identity-proof",
          "documentTypes": [
            "aadhar",
            "voter"
          ],
          "active": true,
          "isMandatory": true,
          "allowedFileTypes": [
            "pdf",
            "doc",
            "docx",
            "xlsx",
            "xls",
            "jpeg",
            "jpg",
            "png"
          ],
          "maxSizeInMB": 5,
          "maxFilesAllowed": 1
        },
        {
          "category": "owner-photo",
          "documentTypes": [
            "photo"
          ],
          "active": true,
          "isMandatory": true,
          "allowedFileTypes": [
            "jpeg",
            "jpg",
            "png"
          ],
          "maxSizeInMB": 5,
          "maxFilesAllowed": 1
        }
      ],
      "idgen": [
        {
          "type": "application",
          "format": "tl.application.number",
          "sequence": "BILL-[SEQ_EGOV_COMMON_TEST_AUTOCRE]"
        },
        {
          "type": "bill",
          "format": "tl.application.number",
          "sequence": "BILL-[SEQ_EGOV_COMMON_TEST_AUTOCRE]"
        }
      ],
      "localization": {
        "modules": [
          "digit-tradelicence"
        ]
      },
      "applicant": {
        "minimum": 1,
        "maximum": 3,
        "types": [
          "individual",
          "organisation"
        ]
      },
      "boundary": {
        "hierarchyType": "REVENUE",
        "lowestLevel": "locality"
      },
      "notification": {
        "sms": [
          {
            "states": [
              "applied"
            ],
            "code": "DIGIT_STUDIO_NEW_APPLICATION",
            "template": "Dear {PublicService.applicants[0].name} a new Application with application no {PublicService.applicationNo} is received"
          },
          {
            "states": [
              "approved"
            ],
            "code": "DIGIT_STUDIO_APPLY_APPROVED",
            "template": "Dear {PublicService.applicants[0].name} a new Application with application no {PublicService.applicationNo} is approved"
          },
          {
            "states": [
              "pending_payment"
            ],
            "code": "DIGIT_STUDIO_DEMAND_CREATED",
            "template": "Dear {PublicService.applicants[0].name} a new Application with application no {PublicService.applicationNo} has pending dues of amount Rs {Bill.totalAmount} "
          }
        ]
      },
      "email":  [
          {
            "states": [
              "applied"
            ],
            "code": "DIGIT_STUDIO_NEW_APPLICATION",
            "template": "Dear {PublicService.applicants[0].name} a new Application with application no {PublicService.applicationNo} is received"
          },
          {
            "states": [
              "approved"
            ],
            "code": "DIGIT_STUDIO_APPLY_APPROVED",
            "template": "Dear {PublicService.applicants[0].name} a new Application with application no {PublicService.applicationNo} is approved"
          },
          {
            "states": [
              "pending_payment"
            ],
            "code": "DIGIT_STUDIO_DEMAND_CREATED",
            "template": "Dear {PublicService.applicants[0].name} a new Application with application no {PublicService.applicationNo} has pending dues of amount Rs {Bill.totalAmount} "
          }
        ]
    },
    "inbox": {
      "module": "public-service",
      "index": "public-service-index",
      "allowedSearchCriteria": [
        {
          "name": "tenantId",
          "path": "Data.tenantId.keyword",
          "isMandatory": true,
          "operator": "EQUAL"
        },
        {
          "name": "status",
          "path": "Data.workflowStatus",
          "isMandatory": false
        },
        {
          "name": "applicationNumber",
          "path": "Data.applicationNumber.keyword",
          "isMandatory": false
        },
        {
          "name": "module",
          "path": "Data.module.keyword",
          "isMandatory": false
        },
        {
          "name": "businessService",
          "path": "Data.businessService.keyword",
          "isMandatory": false
        },
        {
          "name": "locality",
          "path": "Data.address.locality.keyword",
          "isMandatory": false
        },
        {
          "name": "assignee",
          "path": "Data.currentProcessInstance.assignes.uuid.keyword",
          "isMandatory": false
        }
      ],
      "sortBy": {
        "path": "Data.auditDetails.createdTime",
        "defaultOrder": "DESC"
      },
      "sourceFilterPathList": [
        "Data.businessService",
        "Data.applicationNumber",
        "Data.currentProcessInstance",
        "Data.auditDetails",
        "Data.additionalDetails",
        "Data.module",
        "Data.locality",
        "Data.status"
      ]
    },
    "access": {
      "roles": [
        "TL_CREATOR"
      ],
      "actions": [
        {
          "url": "tl-services/v1/create"
        }
      ]
    },
    "rules": {
      "validation": {
        "type": "schema||api||custom||none",
        "service": "tradelicence",
        "schemaCode": "tradelicence.apply",
        "customFunction": "eitherhookname||function"
      },
      "calculator": {
        "type": "api||custom||none",
        "service": "tradelicence",
        "customFunction": "eitherhookname||function"
      },
      "registry": {
        "type": "api||none",
        "service": "tradelicence"
      },
      "references": [
        {
          "type": "initiate",
          "service": "tradelicence"
        }
      ]
    },
    "pdf": [
      {
        "key": "tl-application",
        "type": "application",
        "states": [
          "applied",
          "approved"
        ]
      },
      {
        "key": "tl-bill",
        "type": "bill",
        "states": [
          "applied",
          "approved"
        ]
      },
      {
        "key": "tl-receipt",
        "type": "receipt",
        "states": [
          "applied",
          "approved"
        ]
      }
    ],
    "bill": {
      "businessService": "NewTL",
      "code": "NewTL",
      "collectionModesNotAllowed": [
        "DD",
        "OFFLINE_NEFT",
        "OFFLINE_RTGS",
        "POSTAL_ORDER"
      ],
      "partPaymentAllowed": true,
      "minAmountPayable": 100,
      "isAdvanceAllowed": false,
      "demandUpdateTime": 86400000,
      "isVoucherCreationEnabled": true,
      "taxPeriod": [
        {
          "fromDate": 1522540800000,
          "toDate": 1554076799000,
          "periodCycle": "ANNUAL",
          "service": "NewTL",
          "code": "TLAN2018",
          "financialYear": "2018-19"
        }
      ],
      "taxHead": [
        {
          "category": "TAX",
          "service": "NewTL",
          "name": "tl tax",
          "code": "TL_TAX",
          "isDebit": false,
          "isActualDemand": true,
          "order": "2",
          "isRequired": false
        },
        {
          "category": "TAX",
          "service": "NewTL",
          "name": "tl roundoff",
          "code": "TL_ROUNDOFF",
          "isDebit": false,
          "isActualDemand": true,
          "order": "0",
          "isRequired": false
        },
        {
          "category": "TAX",
          "service": "NewTL",
          "name": "tl adhoc rebate",
          "code": "TL_ADHOC_REBATE",
          "isDebit": true,
          "isActualDemand": false,
          "order": "0",
          "isRequired": false
        },
        {
          "category": "TAX",
          "service": "NewTL",
          "name": "tl adhoc penalty",
          "code": "TL_ADHOC_PENALTY",
          "isDebit": false,
          "isActualDemand": true,
          "order": "1",
          "isRequired": false
        }
      ]
    },
    "payment": {
      "gateway": "TODO"
    },
    "apiconfig": [
      {
        "type": "register",
        "host": "https://staging.digit.org||http://tl-services.egov:8080",
        "endpoint": "/tl-services/v1/create",
        "method": "post",
        "service": "tradelicence"
      },
      {
        "type": "register||calculate||validate||authenticate",
        "host": "https://staging.digit.org||http://tl-services.egov:8080",
        "endpoint": "/tl-services/v1/search",
        "method": "post",
        "service": "tradelicence"
      }
    ],
    "calculator": {
      "billingSlabs": [
        {
          "key": "applicationFee",
          "value": 2000
        }
      ]
    },
    "enabled": [
      "citizen",
      "employee"
    ]
  },
  {
    "module": "Tradelicence",
    "service": "RenewTL",
    "fields": null,
    "workflow": {
      "businessService": "ApprovedTL"
    },
    "idgen": {
      "format": "tl.licence.number"
    },
    "rules": [
      {
        "referenceType": "NewTL"
      }
    ],
    "documents": null,
    "pdf": [
      {
        "key": "tl-certificate",
        "type": "certificate"
      }
    ],
    "bill": null
  },
  {
    "module": "Tradelicence",
    "service": "EditRenewTL",
    "fields": null,
    "workflow": {
      "businessService": "RenewTL"
    },
    "idgen": {
      "format": "tl.renewalapplication.number",
      "sequence": "BILL-[SEQ_EGOV_COMMON_TEST_AUTOCRE]"
    },
    "rules": [
      {
        "referenceType": "ApprovedTL"
      }
    ],
    "documents": [
      {
        "category": "owner-photo",
        "documentTypes": [
          "photo"
        ],
        "active": true,
        "isMandatory": false,
        "workflowAction": [
          "apply",
          "approved"
        ],
        "allowedFileTypes": [
          "jpeg",
          "jpg",
          "png"
        ],
        "maxSizeInMB": 5,
        "maxFilesAllowed": 1
      }
    ],
    "pdf": [
      {
        "key": "tl-renew-application",
        "type": "application",
        "states": [
          "applied",
          "approved"
        ]
      }
    ],
    "calculator": {
      "billingSlabs": [
        {
          "key": "applicationFee",
          "value": 2000
        }
      ]
    },
    "bill": {
      "service": "RenewalFee"
    }
  }
]
}